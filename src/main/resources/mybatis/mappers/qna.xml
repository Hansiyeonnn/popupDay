<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="flower.popupday.notice.qna.dao.QnaDAO">

    <resultMap type="qnaDTO" id="qnaResult">
        <result property="qna_id" column="qna_id"/>
        <result property="user_id" column="user_id"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="created_date" column="created_date"/>
        <result property="answer" column="answer"/>
        <result property="answer_date" column="answer_date"/>
    </resultMap>

    <select id="selectAllQnaList" resultMap="qnaResult">
        select * from qna_tbl order by created_date LIMIT #{count}, 10
    </select>

    <select id="getNewUserId" parameterType="int">
        select IFNULL(MAX(qna_id), 0) + 1 from qna_tbl
    </select>

    <insert id="insertNewQna" parameterType="java.util.Map">
        insert into qna_tbl (user_id, title, content, created_date, status)
        values ('2', #{title}, #{content}, now(), '답변중')
    </insert>

    <select id="selectTotalQna" resultType="int">
        <![CDATA[
            select count(*) from qna_tbl
            ]]>
    </select>

</mapper>