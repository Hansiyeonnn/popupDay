<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/point.css}">
    <link rel="stylesheet" th:href="@{/css/alert.css}">
    <title>포인트 상품 추가</title>
</head>
<body>
<th:block layout:fragment="content">
    <div class="containers">
        <div class="goods-form">
            <form method="post" action="/point/addGoods.do" class="goods" enctype="multipart/form-data" onsubmit="return validateForm()">
                <div>
                    <p>상품 선택</p>
                    <div class="goods-select">
                        <span>
                            <img src="https://res.cloudinary.com/dt1ftobia/image/upload/v1723441616/s3blm9zk3btsfrwok8i4.jpg">
                            <div>
                                <label>바나나맛 우유</label>
                                <input type="radio" name="image_name" value="바나나맛 우유" onclick="showImage()">
                            </div>
                        </span>
                        <!-- Other options remain unchanged -->
                    </div>
                </div>
                <div class="goods-input">
                    <label>상품명 :</label><input name="product_name" placeholder="상품명">
                </div>
                <div class="goods-input">
                    <label>교환가격 :</label><input id="product_price" name="product_price" placeholder="상품교환 가격">
                </div>
                <div class="goods-input">
                    <label>수량 :</label><input type="text" id="product_count" name="product_count" placeholder="상품 수량(미 기입 시 999로 고정)">
                </div>
                <div class="goods-btn">
                    <button type="reset">취소</button>
                    <button type="submit">등록</button>
                    <button><a th:href="@{/point/pointShop.do}">리스트로 돌아가기</a></button>
                </div>
            </form>
        </div>
    </div>
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/jquery-ui.min.js}"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js}" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js}" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script th:src="@{/js/main.js}"></script>
    <script th:src="@{/js/point.js}"></script>
    <script th:src="@{/js/search.js}"></script>
    <script th:src="@{https://cdn.jsdelivr.net/npm/sweetalert2@11}"></script>
    <script>
        function validateForm() {
            var priceInput = document.getElementById("product_price").value.trim();
            var countInput = document.getElementById("product_count").value.trim();
            var price = parseFloat(priceInput);
            var count = parseFloat(countInput);

            var isPriceValid = !isNaN(price) && price > 0;
            var isCountValid = !isNaN(count) && count >= 0;

            if (!isPriceValid || !isCountValid) {
                var errorMessages = [];

                if (!isPriceValid) {
                    errorMessages.push('교환가격에는 유효한 숫자만 입력할 수 있습니다.');
                }

                if (!isCountValid) {
                    errorMessages.push('수량에는 유효한 숫자만 입력할 수 있습니다.');
                }

                Swal.fire({
                    icon: 'error',
                    title: '입력 오류',
                    html: errorMessages.join('<br>') // Join messages with <br> for line breaks
                });

                return false; // Prevent form submission
            }

            return true; // Allow form submission
        }
    </script>
</th:block>
</body>
</html>
